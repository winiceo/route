{"version":3,"sources":["../../../app/model_/message.js"],"names":["module","exports","mongoose","app","Schema","ObjectId","MessageSchema","type","String","master_id","author_id","topic_id","reply_id","has_read","Boolean","default","create_at","Date","now","index","model"],"mappings":"AAAA;;AAEAA,OAAOC,OAAP,GAAiB,eAAO;AACtB,MAAMC,WAAWC,IAAID,QAArB;AACA,MAAME,SAASF,SAASE,MAAxB;AACA,MAAMC,WAAWD,OAAOC,QAAxB;;AAEA,MAAMC,gBAAgB,IAAIF,MAAJ,CAAW;AAC/BG,UAAM,EAAEA,MAAMC,MAAR,EADyB;AAE/BC,eAAW,EAAEF,MAAMF,QAAR,EAFoB;AAG/BK,eAAW,EAAEH,MAAMF,QAAR,EAHoB;AAI/BM,cAAU,EAAEJ,MAAMF,QAAR,EAJqB;AAK/BO,cAAU,EAAEL,MAAMF,QAAR,EALqB;AAM/BQ,cAAU,EAAEN,MAAMO,OAAR,EAAiBC,SAAS,KAA1B,EANqB;AAO/BC,eAAW,EAAET,MAAMU,IAAR,EAAcF,SAASE,KAAKC,GAA5B;AAPoB,GAAX,CAAtB;;AAUAZ,gBAAca,KAAd,CAAoB,EAAEV,WAAW,CAAb,EAAgBI,UAAU,CAAC,CAA3B,EAA8BG,WAAW,CAAC,CAA1C,EAApB;;AAEA,SAAOd,SAASkB,KAAT,CAAe,SAAf,EAA0Bd,aAA1B,CAAP;AACD,CAlBD","file":"message.js","sourcesContent":["'use strict';\n\nmodule.exports = app => {\n  const mongoose = app.mongoose;\n  const Schema = mongoose.Schema;\n  const ObjectId = Schema.ObjectId;\n\n  const MessageSchema = new Schema({\n    type: { type: String },\n    master_id: { type: ObjectId },\n    author_id: { type: ObjectId },\n    topic_id: { type: ObjectId },\n    reply_id: { type: ObjectId },\n    has_read: { type: Boolean, default: false },\n    create_at: { type: Date, default: Date.now },\n  });\n\n  MessageSchema.index({ master_id: 1, has_read: -1, create_at: -1 });\n\n  return mongoose.model('Message', MessageSchema);\n};\n"]}