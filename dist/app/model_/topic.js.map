{"version":3,"sources":["../../../app/model_/topic.js"],"names":["module","exports","mongoose","app","Schema","ObjectId","TopicSchema","title","type","String","content","author_id","top","Boolean","default","good","lock","reply_count","Number","visit_count","collect_count","create_at","Date","now","update_at","last_reply","last_reply_at","content_is_html","tab","deleted","index","model"],"mappings":"AAAA;;AAEAA,OAAOC,OAAP,GAAiB,eAAO;AACtB,MAAMC,WAAWC,IAAID,QAArB;AACA,MAAME,SAASF,SAASE,MAAxB;AACA,MAAMC,WAAWD,OAAOC,QAAxB;;AAEA,MAAMC,cAAc,IAAIF,MAAJ,CAAW;AAC7BG,WAAO,EAAEC,MAAMC,MAAR,EADsB;AAE7BC,aAAS,EAAEF,MAAMC,MAAR,EAFoB;AAG7BE,eAAW,EAAEH,MAAMH,QAAR,EAHkB;AAI7BO,SAAK,EAAEJ,MAAMK,OAAR,EAAiBC,SAAS,KAA1B,EAJwB,EAIW;AACxCC,UAAM,EAAEP,MAAMK,OAAR,EAAiBC,SAAS,KAA1B,EALuB,EAKY;AACzCE,UAAM,EAAER,MAAMK,OAAR,EAAiBC,SAAS,KAA1B,EANuB,EAMY;AACzCG,iBAAa,EAAET,MAAMU,MAAR,EAAgBJ,SAAS,CAAzB,EAPgB;AAQ7BK,iBAAa,EAAEX,MAAMU,MAAR,EAAgBJ,SAAS,CAAzB,EARgB;AAS7BM,mBAAe,EAAEZ,MAAMU,MAAR,EAAgBJ,SAAS,CAAzB,EATc;AAU7BO,eAAW,EAAEb,MAAMc,IAAR,EAAcR,SAASQ,KAAKC,GAA5B,EAVkB;AAW7BC,eAAW,EAAEhB,MAAMc,IAAR,EAAcR,SAASQ,KAAKC,GAA5B,EAXkB;AAY7BE,gBAAY,EAAEjB,MAAMH,QAAR,EAZiB;AAa7BqB,mBAAe,EAAElB,MAAMc,IAAR,EAAcR,SAASQ,KAAKC,GAA5B,EAbc;AAc7BI,qBAAiB,EAAEnB,MAAMK,OAAR,EAdY;AAe7Be,SAAK,EAAEpB,MAAMC,MAAR,EAfwB;AAgB7BoB,aAAS,EAAErB,MAAMK,OAAR,EAAiBC,SAAS,KAA1B;AAhBoB,GAAX,CAApB;;AAmBAR,cAAYwB,KAAZ,CAAkB,EAAET,WAAW,CAAC,CAAd,EAAlB;AACAf,cAAYwB,KAAZ,CAAkB,EAAElB,KAAK,CAAC,CAAR,EAAWc,eAAe,CAAC,CAA3B,EAAlB;AACApB,cAAYwB,KAAZ,CAAkB,EAAEnB,WAAW,CAAb,EAAgBU,WAAW,CAAC,CAA5B,EAAlB;;AAEA,SAAOnB,SAAS6B,KAAT,CAAe,OAAf,EAAwBzB,WAAxB,CAAP;AACD,CA7BD","file":"topic.js","sourcesContent":["'use strict';\n\nmodule.exports = app => {\n  const mongoose = app.mongoose;\n  const Schema = mongoose.Schema;\n  const ObjectId = Schema.ObjectId;\n\n  const TopicSchema = new Schema({\n    title: { type: String },\n    content: { type: String },\n    author_id: { type: ObjectId },\n    top: { type: Boolean, default: false }, // 置顶帖\n    good: { type: Boolean, default: false }, // 精华帖\n    lock: { type: Boolean, default: false }, // 被锁定主题\n    reply_count: { type: Number, default: 0 },\n    visit_count: { type: Number, default: 0 },\n    collect_count: { type: Number, default: 0 },\n    create_at: { type: Date, default: Date.now },\n    update_at: { type: Date, default: Date.now },\n    last_reply: { type: ObjectId },\n    last_reply_at: { type: Date, default: Date.now },\n    content_is_html: { type: Boolean },\n    tab: { type: String },\n    deleted: { type: Boolean, default: false },\n  });\n\n  TopicSchema.index({ create_at: -1 });\n  TopicSchema.index({ top: -1, last_reply_at: -1 });\n  TopicSchema.index({ author_id: 1, create_at: -1 });\n\n  return mongoose.model('Topic', TopicSchema);\n};\n"]}