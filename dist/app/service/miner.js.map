{"version":3,"sources":["../../../app/service/miner.js"],"names":["Service","require","MinerService","user_id","app","mysql","select","where","assets","miner_id","offset","limit","query","orders","module","exports"],"mappings":";;;;;;;;;;;;AACA,IAAMA,UAAUC,QAAQ,KAAR,EAAeD,OAA/B;;IAEME,Y;;;;;;;;;;;;gGAIgBC,O;;;;;;;uCAEO,KAAKC,GAAL,CAASC,KAAT,CAAeC,MAAf,CAAsB,OAAtB,EAA+B;AAChDC,2CAAO,EAAEJ,SAASA,OAAX;AADyC,iCAA/B,C;;;AAAfK,sC;iEAGCA,M;;;;;;;;;;;;;;;;;;;;oBAIgBC,Q,SAAAA,Q;yCAAUC,M;oBAAAA,M,gCAAS,C;wCAAGC,K;oBAAAA,K,+BAAQ,E;;;;;;AAGjDC,qC,GAAQ;;AAERC,4CAAQ,CAAC,CAAC,UAAD,EAAa,MAAb,CAAD,CAFA,EAEwB;AAChCF,2CAAOA,KAHC,EAGM;AACdD,4CAAQA,MAJA,CAIO;AAJP,iC;;AAMZ,oCAAID,YAAY,CAAhB,EAAmB;AACfG,0CAAML,KAAN,GAAc,EAAEE,UAAUA,QAAZ,EAAd;AACH;;uCACoB,KAAKL,GAAL,CAASC,KAAT,CAAeC,MAAf,CAAsB,cAAtB,EAAsCM,KAAtC,C;;;AAAfJ,sC;kEACCA,M;;;;;;;;;;;;;;;;;;;EA1BYR,O;;AAiC3Bc,OAAOC,OAAP,GAAiBb,YAAjB","file":"miner.js","sourcesContent":["\nconst Service = require('egg').Service;\n\nclass MinerService extends Service {\n\n\n\n    async getByUserId(user_id) {\n\n        const assets = await this.app.mysql.select('miner', {\n            where: { user_id: user_id }\n        });\n        return assets;\n    }\n\n\n    async getSharesByMinerId({ miner_id, offset = 0, limit = 20 }) {\n\n\n        let query = {\n\n            orders: [['datetime', 'desc']], // 排序方式\n            limit: limit, // 返回数据量\n            offset: offset // 数据偏移量\n        };\n        if (miner_id != 0) {\n            query.where = { miner_id: miner_id };\n        }\n        const assets = await this.app.mysql.select('miner_shares', query);\n        return assets;\n    }\n\n\n\n}\n\nmodule.exports = MinerService;\n"]}