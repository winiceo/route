{"version":3,"sources":["../../../app/service/wallet.js"],"names":["Service","require","WalletService","query","opt","ctx","model","User","find","exec","email","findOne","password","active","user","pass","level","save","module","exports"],"mappings":";;;;;;;;;;AACA,IAAMA,UAAUC,QAAQ,KAAR,EAAeD,OAA/B;;IAEME,a;;;;;;;;;;;;;AAGF;;;;;;;;;wCASgBC,K,EAAOC,G,EAAK;AACxB,mBAAO,KAAKC,GAAL,CAASC,KAAT,CAAeC,IAAf,CAAoBC,IAApB,CAAyBL,KAAzB,EAAgC,EAAhC,EAAoCC,GAApC,EAAyCK,IAAzC,EAAP;AACH;;AAED;;;;;;;;sCAKcC,K,EAAO;AACjB,mBAAO,KAAKL,GAAL,CAASC,KAAT,CAAeC,IAAf,CAAoBI,OAApB,CAA4B,EAAED,YAAF,EAA5B,EAAuCD,IAAvC,EAAP;AACH;;;mCAEUC,K,EAAOE,Q,EAAUC,M,EAAQ;AAChC,gBAAMC,OAAO,IAAI,KAAKT,GAAL,CAASC,KAAT,CAAeC,IAAnB,EAAb;;AAEAO,iBAAKC,IAAL,GAAYH,QAAZ;AACAE,iBAAKJ,KAAL,GAAaA,KAAb;AACAI,iBAAKE,KAAL,GAAa,CAAb;AACA,mBAAOF,KAAKG,IAAL,EAAP;AACH;;;;EAhCuBjB,O;;AAqC5BkB,OAAOC,OAAP,GAAiBjB,aAAjB","file":"wallet.js","sourcesContent":["\nconst Service = require('egg').Service;\n\nclass WalletService extends Service {\n\n\n    /*\n   * 根据关键字，获取一组用户\n   * Callback:\n   * - err, 数据库异常\n   * - users, 用户列表\n   * @param {String} query 关键字\n   * @param {Object} opt 选项\n   * @return {Promise[users]} 承载用户列表的 Promise 对象\n   */\n    getUsersByQuery(query, opt) {\n        return this.ctx.model.User.find(query, '', opt).exec();\n    }\n\n    /*\n  * 根据邮箱，查找用户\n  * @param {String} email 邮箱地址\n  * @return {Promise[user]} 承载用户的 Promise 对象\n  */\n    getUserByMail(email) {\n        return this.ctx.model.User.findOne({ email }).exec();\n    }\n\n    newAndSave(email, password, active) {\n        const user = new this.ctx.model.User();\n\n        user.pass = password;\n        user.email = email;\n        user.level = 0;\n        return user.save();\n    }\n\n\n}\n\nmodule.exports = WalletService;\n"]}